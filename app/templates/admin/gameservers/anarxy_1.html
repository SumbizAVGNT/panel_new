{% extends "base.html" %}
{% block title %}{{ server.name }} — Game Server{% endblock %}

{% block content %}
<style>
.gs-layout{display:grid;grid-template-columns: 280px 1fr; gap:16px}
@media (max-width: 992px){ .gs-layout{grid-template-columns: 1fr} }
.gs-side{position:sticky; top:76px; align-self:start}
.gs-side .nav-link{border:1px solid rgba(148,163,184,.18); border-radius:10px; margin-bottom:8px}
.gs-side .nav-link.active{background:#0f172a}
.kv{display:grid;grid-template-columns: 140px 1fr; gap:6px}
.card+.card{margin-top:12px}
</style>

<div class="container-xxl">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h1 class="h4 m-0">{{ server.name }}</h1>
      <div class="text-secondary small">{{ server.game }} · {{ server.host }}:{{ server.port }}</div>
    </div>
    <span class="badge {{ 'bg-success' if server.status=='online' else ('bg-warning' if server.status=='maintenance' else 'bg-danger') }}">{{ server.status }}</span>
  </div>

  <div class="gs-layout">
    <!-- Sidebar -->
    <div class="gs-side">
      <div class="card glass p-2">
        {% for key, title in sections %}
          <a class="nav-link px-3 py-2 {{ 'active' if key=='players' else '' }}"
             href="{{ url_for('admin.gameservers_section', server_id=server.id, section=key) }}">
            {{ title }}
          </a>
        {% endfor %}
      </div>
    </div>

    <!-- Content blocks -->
    <div class="gs-main">
      <!-- Overview -->
      <div class="card glass">
        <div class="card-body">
          <h2 class="h6 text-uppercase text-secondary mb-3">Overview</h2>
          <div class="kv small text-secondary">
            <div>Status</div><div><span class="text-light">{{ server.status }}</span></div>
            <div>Players</div><div><span class="text-light">{{ server.players_online }}/{{ server.players_max }}</span></div>
            <div>Endpoint</div><div class="text-light">{{ server.host }}:{{ server.port }}</div>
            <div>Tags</div>
            <div>
              {% for t in server.tags %}
                <span class="badge rounded-pill text-bg-dark border border-secondary-subtle">{{ t }}</span>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <!-- Quick links blocks -->
      <div class="card glass">
        <div class="card-body">
          <h2 class="h6 text-uppercase text-secondary mb-3">Quick actions</h2>
          <div class="d-flex flex-wrap gap-2">
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('admin.gameservers_section', server_id=server.id, section='console') }}"><i class="bi bi-terminal me-1"></i>Console</a>
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('admin.gameservers_section', server_id=server.id, section='logs') }}"><i class="bi bi-journal-text me-1"></i>Logs</a>
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('admin.gameservers_section', server_id=server.id, section='whitelist') }}"><i class="bi bi-shield-check me-1"></i>WhiteList</a>
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('admin.gameservers_section', server_id=server.id, section='oplist') }}"><i class="bi bi-person-badge me-1"></i>OpList</a>
            <a class="btn btn-outline-warning btn-sm" href="{{ url_for('admin.gameservers_section', server_id=server.id, section='maintenance') }}"><i class="bi bi-cone-striped me-1"></i>Technical work</a>
          </div>
        </div>
      </div>

      <!-- Placeholder blocks (можно переиспользовать) -->
      <div class="card glass">
        <div class="card-body">
          <h2 class="h6 text-uppercase text-secondary mb-3">Recent activity</h2>
          <div class="text-secondary">Nothing here yet.</div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
